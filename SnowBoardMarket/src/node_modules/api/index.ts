import * as R from 'ramda';
import { fetch, addTask } from 'domain-task';
import snowboards from './mockSnowboards';
import categories from './mockCategories';
import {
    FETCH_SNOWBOARDS_SUCCESS
} from 'actionTypes';

export const fetchSnowboards = async (basketUri) => {
    let body;
    try
    {
        let fetchTask = fetch(`${basketUri}/api/market/getsnowboards`)
                // .then(response => response.json() as Promise<any[]>)
                // .then(data => {
                //     dispatch({
                //         type: FETCH_SNOWBOARDS_SUCCESS,
                //         payload: snowboards
                //     })
                // });

        addTask(fetchTask);
        body = await (await fetchTask).json();

        // const response = await request.get(
        //     'http://localhost:5011/api/market/getsnowboards'
        // )
        // body = response.body;
    } catch (ex)
    {
        console.log(ex);
    }

    return body;
    // return new Promise(resolve => {
    //     resolve(snowboards);
    // })
}

export const loadMoreSnowboards = async ({offset}) => {
    return new Promise(resolve => {
        resolve(snowboards);
    })
}

export const fetchSnowboardById = async (Id) => {
    return new Promise((resolve, reject) => {
        const snowboard = R.find(R.propEq('id', Id), snowboards);
        resolve(snowboard);
    })
}


export let fetchCategories = async () => {
    return new Promise(resolve => {
        resolve(categories);
    })
}