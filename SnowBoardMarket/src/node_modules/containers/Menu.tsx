import * as React from 'react';
import { Link, withRouter } from 'react-router-dom';
import MenuLinks from 'consts/MenuLinks';
import * as menuStyles from 'css/menu.css';
import * as classNames from 'classnames';
import {compose} from 'redux';
import { connect } from 'react-redux';
import { getActiveMenu } from 'selectors';
import R = require('ramda');

class Menu extends React.Component<{activeMenu},{}> {
    renderMenu(Menu, index) {
        const {activeMenu} = this.props;
        const getActiveState = url => R.equals(url, activeMenu)
        const linkClass = classNames({
            'current': getActiveState(Menu.url)
        })
        return (
            <li
                key={index}
            >
                <Link
                    to={Menu.url}
                    className={linkClass}
                >
                    {Menu.name}
                </Link>
            </li>
        );
    }
    render() {
        return (
            <nav>
                <ul
                    className='menu-main'
                >
                    {MenuLinks && MenuLinks.map((menu, index) => this.renderMenu(menu, index))}
                </ul>
            </nav>
        );
    }
}

const mapStateToProps = (state, ownProps) => ({
    activeMenu: getActiveMenu(ownProps)
})

export default compose(
    withRouter,
    connect(mapStateToProps, null)
)(Menu)